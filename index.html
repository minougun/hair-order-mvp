<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>美容室オーダー文メーカー</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@500;700&family=Outfit:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="bg-orb orb-a"></div>
    <div class="bg-orb orb-b"></div>

    <header class="hero shell">
      <h1>美容室オーダー文メーカー</h1>
      <p>
        悩みと制約を選ぶだけで、美容師にそのまま見せられる文章を生成します。
        診断ではなく、言語化支援として使う前提です。
      </p>
    </header>

    <main class="shell layout">
      <section class="panel form-panel">
        <h2>1. 入力（10タップ目安）</h2>
        <form id="order-form">
          <fieldset>
            <legend>現状</legend>
            <div class="grid-2">
              <label>性別
                <select name="gender">
                  <option value="male" selected>男性</option>
                  <option value="female">女性</option>
                </select>
              </label>
              <label>長さ
                <select name="length">
                  <option value="short">短め</option>
                  <option value="medium">中くらい</option>
                  <option value="long">長め</option>
                </select>
              </label>
              <label>量
                <select name="volume">
                  <option value="low">少なめ</option>
                  <option value="normal" selected>普通</option>
                  <option value="high">多め</option>
                </select>
              </label>
              <label>硬さ
                <select name="stiffness">
                  <option value="soft">柔らかい</option>
                  <option value="normal" selected>普通</option>
                  <option value="hard">硬い</option>
                </select>
              </label>
              <label>クセ
                <select name="wave">
                  <option value="straight">直毛</option>
                  <option value="wavy">うねり</option>
                  <option value="curly">強いクセ</option>
                </select>
              </label>
              <label>つむじの強さ
                <select name="crown">
                  <option value="weak">弱い</option>
                  <option value="normal" selected>普通</option>
                  <option value="strong">強い</option>
                </select>
              </label>
            </div>
          </fieldset>

          <fieldset>
            <legend>写真から自動推定（任意）</legend>
            <div class="photo-grid">
              <label>正面写真
                <input id="front-photo" name="frontPhoto" type="file" accept="image/*" />
              </label>
              <label>横写真
                <input id="side-photo" name="sidePhoto" type="file" accept="image/*" />
              </label>
              <label>頭頂写真（つむじ）
                <input id="top-photo" name="topPhoto" type="file" accept="image/*" />
              </label>
            </div>
            <button id="analyze-photos" type="button" class="ghost">写真を解析して入力に反映</button>
            <p id="photo-status" class="photo-status">正面・横・頭頂の3枚を入れると推定精度が上がります。</p>
            <ul id="photo-predictions" class="photo-predictions"></ul>
          </fieldset>

          <fieldset>
            <legend>地域（任意）</legend>
            <div class="grid-2 location-grid">
              <label>最寄駅・エリア
                <input
                  id="area-query"
                  name="areaQuery"
                  type="text"
                  placeholder="例: 梅田 / 心斎橋 / 三宮 / 京都駅"
                  autocomplete="address-level2"
                />
              </label>
              <div class="location-actions">
                <button id="detect-location" type="button" class="ghost">現在地を使う（GPS）</button>
                <p id="location-status" class="location-status">
                  位置情報は任意です。許可すると近いサロンを優先表示します。
                </p>
              </div>
            </div>
            <input id="latitude" name="latitude" type="hidden" />
            <input id="longitude" name="longitude" type="hidden" />
          </fieldset>

          <fieldset>
            <legend>困りごと（複数可）</legend>
            <div class="chip-group">
              <label class="chip"><input type="checkbox" name="concerns" value="front_split" />前髪割れ</label>
              <label class="chip"><input type="checkbox" name="concerns" value="top_flat" />トップ潰れ</label>
              <label class="chip"><input type="checkbox" name="concerns" value="side_puff" />サイド膨らみ</label>
              <label class="chip"><input type="checkbox" name="concerns" value="hachi_wide" />ハチ張り</label>
              <label class="chip"><input type="checkbox" name="concerns" value="frizz" />広がり</label>
              <label class="chip"><input type="checkbox" name="concerns" value="limp" />ぺたんこ</label>
              <label class="chip"><input type="checkbox" name="concerns" value="style_fades" />セット崩れ</label>
            </div>
          </fieldset>

          <fieldset>
            <legend>なりたい印象（複数可）</legend>
            <div class="chip-group">
              <label class="chip"><input type="checkbox" name="goals" value="clean" checked />清潔感</label>
              <label class="chip"><input type="checkbox" name="goals" value="sharp" />シャープ</label>
              <label class="chip"><input type="checkbox" name="goals" value="soft" />柔らかめ</label>
              <label class="chip"><input type="checkbox" name="goals" value="korean" />韓国っぽい</label>
              <label class="chip"><input type="checkbox" name="goals" value="business" checked />ビジネス寄り</label>
              <label class="chip"><input type="checkbox" name="goals" value="casual" />カジュアル</label>
            </div>
          </fieldset>

          <fieldset>
            <legend>制約</legend>
            <div class="grid-2">
              <label>朝セット時間
                <select name="setTime">
                  <option value="0">0分</option>
                  <option value="3" selected>3分</option>
                  <option value="7">7分</option>
                  <option value="15">15分</option>
                </select>
              </label>
              <label>アイロン
                <select name="iron">
                  <option value="no" selected>使わない</option>
                  <option value="yes">使う</option>
                </select>
              </label>
              <label>職場ルール
                <select name="dressCode">
                  <option value="strict">厳しめ</option>
                  <option value="normal" selected>普通</option>
                  <option value="free">ゆるめ</option>
                </select>
              </label>
              <label>メンテ頻度
                <select name="maintenance">
                  <option value="2w">1〜2週</option>
                  <option value="1m" selected>1ヶ月</option>
                  <option value="2m">2ヶ月</option>
                </select>
              </label>
            </div>
          </fieldset>

          <fieldset>
            <legend>その他要望を反映してほしいところ</legend>
            <label>自由記述（任意）
              <textarea
                name="customRequest"
                rows="3"
                placeholder="例: 耳まわりはすっきり / 前髪は重め / 韓国っぽさは少しだけ / 校則で派手すぎはNG"
              ></textarea>
            </label>
          </fieldset>

          <button type="submit" class="cta">オーダー文を生成</button>
        </form>
      </section>

      <section id="result-section" class="panel result-panel" hidden>
        <h2>2. 生成結果</h2>
        <p id="result-badge" class="result-badge"></p>

        <article class="result-block">
          <h3>おすすめヘアカタログ</h3>
          <p class="catalog-caption">一番近い1件と、代替候補を2件を「外部リンクカード」で表示します。</p>
          <p id="catalog-location-hint" class="catalog-location-hint"></p>
          <p id="catalog-embed-status" class="catalog-embed-status" hidden></p>
          <div id="catalog-embed-wrap" class="catalog-embed-wrap" hidden>
            <p class="catalog-embed-label">最有力候補のInstagram埋め込み</p>
            <iframe
              id="catalog-embed-frame"
              class="catalog-embed-frame"
              title="Instagram埋め込みプレビュー"
              loading="lazy"
              referrerpolicy="strict-origin-when-cross-origin"
            ></iframe>
          </div>
          <div id="catalog-main"></div>
          <div id="catalog-grid" class="catalog-grid"></div>
          <p class="catalog-note">
            画像は本アプリで再配布せず、公式サイト / Instagram / 予約ページへの遷移のみを提供します。
          </p>
        </article>

        <article class="result-block">
          <h3>要約</h3>
          <p id="result-summary"></p>
        </article>

        <article class="result-block">
          <h3>具体指示</h3>
          <ul id="result-specifics"></ul>
        </article>

        <article class="result-block">
          <h3>避けたいこと</h3>
          <ul id="result-ng"></ul>
        </article>

        <article class="result-block">
          <h3>美容師に聞く</h3>
          <ul id="result-ask"></ul>
        </article>

        <article class="result-block">
          <h3>検索ワード</h3>
          <ul id="result-search"></ul>
        </article>

        <article class="result-block">
          <h3>そのまま見せる本文</h3>
          <textarea id="order-text" rows="14" readonly></textarea>
          <button id="copy-order" type="button" class="ghost">本文をコピー</button>
        </article>

        <article class="result-block">
          <h3>シェアカード文</h3>
          <textarea id="share-text" rows="7" readonly></textarea>
          <button id="copy-share" type="button" class="ghost">カード文をコピー</button>
          <button id="download-card" type="button" class="ghost">結果カードPNGを保存</button>
          <a id="card-download-link" class="download-link" hidden download="hair-order-card.png">ダウンロード準備完了: クリックして保存</a>
          <canvas id="share-card-canvas" width="1080" height="1350" hidden></canvas>
        </article>

        <p class="note">
          本アプリは医療・障害・性格の判定を行いません。提案は参考情報として扱い、最終判断は美容師と相談してください。
        </p>
      </section>
    </main>

    <script type="module" src="./app.js"></script>
  </body>
</html>
